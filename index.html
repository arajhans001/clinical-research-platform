<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClinicalIntel Pro - Clinical Research Intelligence Platform</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="data:application/json,{'name':'ClinicalIntel Pro','short_name':'ClinicalIntel','theme_color':'#1d7485','background_color':'#fcfcf9','display':'standalone','start_url':'/','icons':[{'src':'data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><circle cx=\"50\" cy=\"50\" r=\"45\" fill=\"%231d7485\"/><text x=\"50\" y=\"60\" font-family=\"Arial\" font-size=\"40\" fill=\"white\" text-anchor=\"middle\">CI</text></svg>','sizes':'192x192','type':'image/svg+xml'}]}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-spinner"></div>
        <h2>Loading ClinicalIntel Pro...</h2>
        <p>Initializing ML models and real-time data feeds</p>
    </div>

    <!-- Welcome Screen -->
    <div id="welcome-screen" class="welcome-screen hidden">
        <div class="welcome-container">
            <header class="welcome-header">
                <h1>ClinicalIntel Pro</h1>
                <p>AI-Powered Clinical Research Intelligence Platform</p>
            </header>
            
            <div class="stakeholder-selection">
                <h2>Select Your Role</h2>
                <div class="stakeholder-cards">
                    <div class="stakeholder-card" data-role="pharmaceutical">
                        <div class="card-icon">üè¢</div>
                        <h3>Pharmaceutical Companies</h3>
                        <p>Regulatory intelligence, competitive analysis, and ROI optimization</p>
                        <ul>
                            <li>FDA/EMA guidance tracking</li>
                            <li>Competitive landscape analysis</li>
                            <li>Site selection optimization</li>
                            <li>ROI calculators</li>
                        </ul>
                        <button class="btn btn--primary">Access Dashboard</button>
                    </div>
                    
                    <div class="stakeholder-card" data-role="physicians">
                        <div class="card-icon">üë®‚Äç‚öïÔ∏è</div>
                        <h3>Physicians & Clinicians</h3>
                        <p>Patient-trial matching and clinical workflow integration</p>
                        <ul>
                            <li>AI-powered patient matching</li>
                            <li>One-click referral system</li>
                            <li>CME credit tracking</li>
                            <li>Mobile-optimized interface</li>
                        </ul>
                        <button class="btn btn--primary">Access Dashboard</button>
                    </div>
                    
                    <div class="stakeholder-card" data-role="cros">
                        <div class="card-icon">üìä</div>
                        <h3>Clinical Research Organizations</h3>
                        <p>Site analytics, enrollment tracking, and business intelligence</p>
                        <ul>
                            <li>Site performance analytics</li>
                            <li>Enrollment predictions</li>
                            <li>Budget forecasting</li>
                            <li>Quality assurance</li>
                        </ul>
                        <button class="btn btn--primary">Access Dashboard</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="main-app" class="main-app hidden">
        <!-- Navigation Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="header-left">
                    <h1 class="app-title">ClinicalIntel Pro</h1>
                    <div class="user-role-badge">
                        <span id="current-role-text">Pharmaceutical</span>
                    </div>
                </div>
                <div class="header-right">
                    <div class="header-actions">
                        <button class="btn btn--outline btn--sm" id="real-time-toggle">
                            <span class="status-indicator active"></span>
                            Real-time Data
                        </button>
                        <button class="btn btn--outline btn--sm" id="export-data">Export</button>
                        <button class="btn btn--secondary btn--sm" id="change-role">Switch Role</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Dashboard Content -->
        <main class="dashboard-main">
            <div class="container">
                <!-- Dashboard Metrics -->
                <div class="metrics-grid" id="dashboard-metrics">
                    <!-- Metrics will be populated by JavaScript -->
                </div>

                <!-- Role-Specific Content -->
                <div class="dashboard-content">
                    
                    <!-- Pharmaceutical Dashboard -->
                    <div id="pharmaceutical-dashboard" class="role-dashboard hidden">
                        <div class="dashboard-grid">
                            <div class="dashboard-section">
                                <div class="card">
                                    <div class="card__body">
                                        <h3>Regulatory Intelligence Hub</h3>
                                        <div class="regulatory-updates" id="regulatory-updates">
                                            <!-- Updates populated by JS -->
                                        </div>
                                        <button class="btn btn--primary btn--sm">View All Updates</button>
                                    </div>
                                </div>
                            </div>

                            <div class="dashboard-section">
                                <div class="card">
                                    <div class="card__body">
                                        <h3>Competitive Landscape</h3>
                                        <div class="chart-container" style="position: relative; height: 300px;">
                                            <canvas id="competitive-chart"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="dashboard-section">
                                <div class="card">
                                    <div class="card__body">
                                        <h3>Site Selection Optimizer</h3>
                                        <div id="site-map" style="height: 400px; border-radius: var(--radius-base);"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="dashboard-section">
                                <div class="card">
                                    <div class="card__body">
                                        <h3>ROI Calculator</h3>
                                        <div class="roi-calculator">
                                            <div class="form-group">
                                                <label class="form-label">Development Phase</label>
                                                <select class="form-control" id="roi-phase">
                                                    <option value="phase1">Phase I</option>
                                                    <option value="phase2">Phase II</option>
                                                    <option value="phase3">Phase III</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Market Size ($ Millions)</label>
                                                <input type="number" class="form-control" id="roi-market-size" value="1000">
                                            </div>
                                            <div class="roi-result">
                                                <h4>Projected NPV: <span id="roi-npv">$487M</span></h4>
                                                <p>Risk-adjusted return: <span id="roi-return">15.3%</span></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Physicians Dashboard -->
                    <div id="physicians-dashboard" class="role-dashboard hidden">
                        <div class="dashboard-grid">
                            <div class="dashboard-section">
                                <div class="card">
                                    <div class="card__body">
                                        <h3>Patient-Trial Matching</h3>
                                        <div class="patient-matching-form">
                                            <div class="form-group">
                                                <label class="form-label">Patient Condition</label>
                                                <input type="text" class="form-control" id="patient-condition" placeholder="e.g., Type 2 Diabetes">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Age</label>
                                                <input type="number" class="form-control" id="patient-age" placeholder="Patient age">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Location</label>
                                                <input type="text" class="form-control" id="patient-location" placeholder="City, State">
                                            </div>
                                            <button class="btn btn--primary" id="find-trials">Find Matching Trials</button>
                                        </div>
                                        <div class="trial-matches" id="trial-matches">
                                            <!-- Matches populated by JS -->
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="dashboard-section">
                                <div class="card">
                                    <div class="card__body">
                                        <h3>Referral Management</h3>
                                        <div class="referral-stats">
                                            <div class="stat-item">
                                                <h4>34</h4>
                                                <p>Referrals Sent</p>
                                            </div>
                                            <div class="stat-item">
                                                <h4>28</h4>
                                                <p>Patients Enrolled</p>
                                            </div>
                                            <div class="stat-item">
                                                <h4>82%</h4>
                                                <p>Success Rate</p>
                                            </div>
                                        </div>
                                        <button class="btn btn--outline">Generate Referral</button>
                                    </div>
                                </div>
                            </div>

                            <div class="dashboard-section">
                                <div class="card">
                                    <div class="card__body">
                                        <h3>CME Tracking</h3>
                                        <div class="cme-progress">
                                            <div class="progress-bar">
                                                <div class="progress-fill" style="width: 65%"></div>
                                            </div>
                                            <p>12.5 of 20 credits completed</p>
                                        </div>
                                        <div class="cme-activities">
                                            <div class="activity-item">
                                                <span>Clinical Trial Design Webinar</span>
                                                <span class="cme-credits">2.5 credits</span>
                                            </div>
                                            <div class="activity-item">
                                                <span>Patient Safety in Research</span>
                                                <span class="cme-credits">3.0 credits</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="dashboard-section">
                                <div class="card">
                                    <div class="card__body">
                                        <h3>Practice Analytics</h3>
                                        <div class="chart-container" style="position: relative; height: 250px;">
                                            <canvas id="practice-chart"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- CRO Dashboard -->
                    <div id="cros-dashboard" class="role-dashboard hidden">
                        <div class="dashboard-grid">
                            <div class="dashboard-section">
                                <div class="card">
                                    <div class="card__body">
                                        <h3>Site Performance Analytics</h3>
                                        <div class="chart-container" style="position: relative; height: 300px;">
                                            <canvas id="site-performance-chart"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="dashboard-section">
                                <div class="card">
                                    <div class="card__body">
                                        <h3>Enrollment Predictions</h3>
                                        <div class="prediction-models">
                                            <div class="model-result">
                                                <h4>Current Trajectory</h4>
                                                <p>Target: 500 patients by Dec 2025</p>
                                                <p>Predicted: 487 patients (97.4% of target)</p>
                                                <div class="confidence-score">
                                                    <span>Confidence: 89%</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="chart-container" style="position: relative; height: 200px;">
                                            <canvas id="enrollment-prediction-chart"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="dashboard-section">
                                <div class="card">
                                    <div class="card__body">
                                        <h3>Budget Analysis</h3>
                                        <div class="budget-overview">
                                            <div class="budget-item">
                                                <span>Total Budget</span>
                                                <span class="budget-amount">$2.4M</span>
                                            </div>
                                            <div class="budget-item">
                                                <span>Utilized</span>
                                                <span class="budget-amount">$2.09M (87%)</span>
                                            </div>
                                            <div class="budget-item">
                                                <span>Remaining</span>
                                                <span class="budget-amount">$310K</span>
                                            </div>
                                        </div>
                                        <div class="chart-container" style="position: relative; height: 200px;">
                                            <canvas id="budget-chart"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="dashboard-section">
                                <div class="card">
                                    <div class="card__body">
                                        <h3>Quality Assurance</h3>
                                        <div class="quality-metrics">
                                            <div class="quality-item">
                                                <span>Data Quality Score</span>
                                                <span class="quality-score success">96%</span>
                                            </div>
                                            <div class="quality-item">
                                                <span>GCP Compliance</span>
                                                <span class="quality-score success">98%</span>
                                            </div>
                                            <div class="quality-item">
                                                <span>Protocol Deviations</span>
                                                <span class="quality-score warning">23</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Notification System -->
    <div id="notification-container" class="notification-container"></div>

    <!-- Modal for Data Export -->
    <div id="export-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Export Data</h3>
                <button class="modal-close" id="close-export-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Export Format</label>
                    <select class="form-control" id="export-format">
                        <option value="pdf">PDF Report</option>
                        <option value="excel">Excel Spreadsheet</option>
                        <option value="csv">CSV Data</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Date Range</label>
                    <input type="date" class="form-control" id="export-start-date">
                    <input type="date" class="form-control" id="export-end-date">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--outline" id="cancel-export">Cancel</button>
                <button class="btn btn--primary" id="confirm-export">Export Data</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>