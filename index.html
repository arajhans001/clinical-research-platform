<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clinical Research Intelligence Platform</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.0/axios.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation Header -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h2>Clinical Research Intel</h2>
            </div>
            <div class="nav-menu">
                <button class="btn btn--outline nav-toggle" id="stakeholder-selector">
                    <span id="current-stakeholder">Select Your Role</span>
                    <svg class="chevron-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <!-- Stakeholder Selection Modal -->
    <div class="modal hidden" id="stakeholder-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Select Your Role</h3>
                <button class="modal-close" id="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="stakeholder-grid">
                    <div class="stakeholder-card" data-stakeholder="physician">
                        <div class="stakeholder-icon">üë©‚Äç‚öïÔ∏è</div>
                        <h4>Physicians & Clinical Practitioners</h4>
                        <p>EMR integration, patient matching, and clinical workflow tools</p>
                        <button class="btn btn--primary">Select</button>
                    </div>
                    <div class="stakeholder-card" data-stakeholder="pharma">
                        <div class="stakeholder-icon">üè¢</div>
                        <h4>Pharmaceutical Companies</h4>
                        <p>Drug development pipeline, regulatory guidance, and competitive intelligence</p>
                        <button class="btn btn--primary">Select</button>
                    </div>
                    <div class="stakeholder-card" data-stakeholder="cro">
                        <div class="stakeholder-icon">üìä</div>
                        <h4>Clinical Research Organizations</h4>
                        <p>Trial analytics, competitive analysis, and intelligent querying</p>
                        <button class="btn btn--primary">Select</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Welcome Section -->
        <section class="welcome-section" id="welcome-section">
            <div class="welcome-container">
                <h1>Clinical Research Intelligence Platform</h1>
                <p class="welcome-subtitle">Real-time AI-powered platform with live data integration and machine learning analysis</p>
                <div class="welcome-stats">
                    <div class="stat-item">
                        <div class="stat-number">$2.6B</div>
                        <div class="stat-label">Average cost per failed drug</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">90%</div>
                        <div class="stat-label">Clinical trial failure rate</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">80%</div>
                        <div class="stat-label">Trials with enrollment delays</div>
                    </div>
                </div>
                <button class="btn btn--primary btn--large" id="get-started-btn">Start Analysis</button>
            </div>
        </section>

        <!-- Physician Dashboard -->
        <section class="dashboard-section hidden" id="physician-dashboard">
            <div class="dashboard-container">
                <div class="dashboard-header">
                    <h2>Physician Dashboard - EMR Integration & Patient Matching</h2>
                    <p>Connect your EMR system and automatically match patients to clinical trials</p>
                </div>
                
                <!-- EMR Integration Section -->
                <div class="card">
                    <h3>üè• EMR System Integration</h3>
                    <div id="emr-integration">
                        <div class="emr-connection" id="emr-connection">
                            <h4>Connect Your EMR System</h4>
                            <div class="emr-options">
                                <button class="btn btn--outline emr-btn" data-emr="epic" onclick="app.connectEMR('epic')">
                                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSI+PHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjMDA3Y2JhIi8+PHRleHQgeD0iMTIiIHk9IjE1IiBmaWxsPSJ3aGl0ZSIgZm9udC1zaXplPSIxMCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+RTwvdGV4dD48L3N2Zz4=" alt="Epic" />
                                    Epic MyChart
                                </button>
                                <button class="btn btn--outline emr-btn" data-emr="cerner" onclick="app.connectEMR('cerner')">
                                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSI+PHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjZmY2YjM1Ii8+PHRleHQgeD0iMTIiIHk9IjE1IiBmaWxsPSJ3aGl0ZSIgZm9udC1zaXplPSIxMCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+QzwvdGV4dD48L3N2Zz4=" alt="Cerner" />
                                    Cerner PowerChart
                                </button>
                                <button class="btn btn--outline emr-btn" data-emr="allscripts" onclick="app.connectEMR('allscripts')">
                                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSI+PHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjMDA2ZTU0Ii8+PHRleHQgeD0iMTIiIHk9IjE1IiBmaWxsPSJ3aGl0ZSIgZm9udC1zaXplPSIxMCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+QTwvdGV4dD48L3N2Zz4=" alt="Allscripts" />
                                    Allscripts
                                </button>
                            </div>
                            <div class="emr-auth-form hidden" id="emr-auth-form">
                                <h4>EMR Authentication</h4>
                                <div class="form-group">
                                    <label>EMR System URL</label>
                                    <input type="url" id="emr-url" placeholder="https://your-emr-system.com/api" required>
                                </div>
                                <div class="form-group">
                                    <label>Client ID</label>
                                    <input type="text" id="emr-client-id" placeholder="Your FHIR Client ID" required>
                                </div>
                                <div class="form-group">
                                    <label>Access Token</label>
                                    <input type="password" id="emr-token" placeholder="Your API Access Token" required>
                                </div>
                                <div class="form-actions">
                                    <button class="btn btn--primary" onclick="app.authenticateEMR()">Connect EMR</button>
                                    <button class="btn btn--outline" onclick="app.testConnection()">Test Connection</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="emr-status hidden" id="emr-status">
                            <div class="connection-status">
                                <h4>‚úÖ EMR Connected Successfully</h4>
                                <p>Connected to: <span id="connected-emr-name"></span></p>
                                <p>Last sync: <span id="last-sync-time"></span></p>
                                <button class="btn btn--outline" onclick="app.syncPatients()">Sync Patients</button>
                                <button class="btn btn--secondary" onclick="app.disconnectEMR()">Disconnect</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Patient List Section -->
                <div class="card">
                    <h3>üë• Patient List & Trial Matching</h3>
                    <div class="patient-search">
                        <input type="text" id="patient-search" placeholder="Search patients by name, condition, or ID..." />
                        <button class="btn btn--primary" onclick="app.searchPatients()">Search</button>
                        <button class="btn btn--outline" onclick="app.loadAllPatients()">Load All Patients</button>
                    </div>
                    
                    <div id="patient-list" class="patient-list">
                        <div class="loading-patients">
                            <p>Connect your EMR system to load patient data</p>
                        </div>
                    </div>
                </div>

                <!-- Trial Matching Results -->
                <div class="card hidden" id="trial-matching-section">
                    <h3>üéØ Clinical Trial Matches</h3>
                    <div id="selected-patient-info"></div>
                    <div id="trial-matches"></div>
                </div>
            </div>
        </section>

        <!-- Pharma Dashboard -->
        <section class="dashboard-section hidden" id="pharma-dashboard">
            <div class="dashboard-container">
                <div class="dashboard-header">
                    <h2>Pharmaceutical Intelligence & Development Pipeline</h2>
                    <p>AI-powered drug development guidance, regulatory framework assistance, and competitive intelligence</p>
                </div>
                
                <!-- Drug Development Input -->
                <div class="card">
                    <h3>üíä Drug Development Information</h3>
                    <form id="drug-dev-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Drug/Compound Name</label>
                                <input type="text" id="drug-name" placeholder="e.g., ABC-123, CompoundX" required>
                            </div>
                            <div class="form-group">
                                <label>Therapeutic Area</label>
                                <select id="therapeutic-area" required>
                                    <option value="">Select therapeutic area...</option>
                                    <option value="oncology">Oncology</option>
                                    <option value="cardiovascular">Cardiovascular</option>
                                    <option value="neurology">Neurology</option>
                                    <option value="diabetes">Diabetes/Endocrinology</option>
                                    <option value="respiratory">Respiratory</option>
                                    <option value="immunology">Immunology</option>
                                    <option value="infectious-disease">Infectious Disease</option>
                                    <option value="rare-disease">Rare Disease</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Current Phase</label>
                                <select id="current-phase" required>
                                    <option value="">Select current phase...</option>
                                    <option value="preclinical">Preclinical</option>
                                    <option value="phase-1">Phase I</option>
                                    <option value="phase-2">Phase II</option>
                                    <option value="phase-3">Phase III</option>
                                    <option value="registration">Registration</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>Target Indication</label>
                                <input type="text" id="target-indication" placeholder="e.g., Non-small cell lung cancer, Heart failure" required>
                            </div>
                            <div class="form-group">
                                <label>Mechanism of Action</label>
                                <input type="text" id="mechanism-action" placeholder="e.g., PD-1 inhibitor, ACE inhibitor" required>
                            </div>
                            <div class="form-group">
                                <label>Development Budget ($M)</label>
                                <input type="number" id="dev-budget" placeholder="50" min="1" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Target Market Launch</label>
                                <input type="date" id="target-launch" required>
                            </div>
                            <div class="form-group">
                                <label>Risk Tolerance</label>
                                <select id="risk-tolerance" required>
                                    <option value="">Select risk level...</option>
                                    <option value="low">Low - Conservative approach</option>
                                    <option value="medium">Medium - Balanced approach</option>
                                    <option value="high">High - Aggressive timeline</option>
                                </select>
                            </div>
                        </div>

                        <button type="submit" class="btn btn--primary btn--large">Generate Development Plan & Analysis</button>
                    </form>
                </div>

                <!-- Live Results Sections -->
                <div class="results-grid hidden" id="pharma-results">
                    <!-- Regulatory Guidance & Forms -->
                    <div class="card">
                        <h3>üìã Regulatory Guidance & Form Generation</h3>
                        <div id="regulatory-guidance" class="loading-content">
                            <div class="spinner">Analyzing regulatory requirements...</div>
                        </div>
                    </div>

                    <!-- Development Timeline -->
                    <div class="card">
                        <h3>üìÖ AI-Generated Development Timeline</h3>
                        <div id="development-timeline" class="loading-content">
                            <div class="spinner">Creating optimized timeline...</div>
                        </div>
                    </div>

                    <!-- Competitive Landscape -->
                    <div class="card">
                        <h3>üè¢ Live Competitive Intelligence</h3>
                        <div id="competitive-landscape" class="loading-content">
                            <div class="spinner">Searching competitive landscape...</div>
                        </div>
                    </div>

                    <!-- Enhanced ROI Analysis -->
                    <div class="card">
                        <h3>üí∞ Advanced ROI Analysis</h3>
                        <div id="roi-analysis" class="loading-content">
                            <div class="spinner">Calculating financial projections...</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CRO Dashboard -->
        <section class="dashboard-section hidden" id="cro-dashboard">
            <div class="dashboard-container">
                <div class="dashboard-header">
                    <h2>CRO Analytics & Intelligence Platform</h2>
                    <p>Real-time trial analytics, competitive intelligence, and AI-powered insights</p>
                </div>

                <!-- CRO Information Input -->
                <div class="card">
                    <h3>üè¢ CRO Information & Trial Data Upload</h3>
                    <form id="cro-info-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label>CRO Company Name</label>
                                <input type="text" id="cro-name" placeholder="Your CRO company name" required>
                            </div>
                            <div class="form-group">
                                <label>Primary Therapeutic Focus</label>
                                <select id="cro-focus" required>
                                    <option value="">Select primary focus...</option>
                                    <option value="oncology">Oncology</option>
                                    <option value="cardiovascular">Cardiovascular</option>
                                    <option value="neurology">Neurology</option>
                                    <option value="multi-therapeutic">Multi-therapeutic</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Geographic Coverage</label>
                                <select id="cro-geography" required>
                                    <option value="">Select coverage...</option>
                                    <option value="us-only">US Only</option>
                                    <option value="north-america">North America</option>
                                    <option value="global">Global</option>
                                </select>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn--primary">Initialize CRO Analysis</button>
                    </form>
                    
                    <!-- Trial Data Upload -->
                    <div class="data-upload-section" id="trial-data-upload">
                        <h4>üìä Upload Your Trial Data</h4>
                        <div class="upload-options">
                            <div class="upload-method">
                                <h5>CSV/Excel Upload</h5>
                                <input type="file" id="trial-data-file" accept=".csv,.xlsx,.xls" multiple>
                                <button class="btn btn--outline" onclick="app.uploadTrialData()">Upload Files</button>
                            </div>
                            <div class="upload-method">
                                <h5>Manual Trial Entry</h5>
                                <button class="btn btn--outline" onclick="app.showTrialEntryForm()">Enter Trial Data</button>
                            </div>
                            <div class="upload-method">
                                <h5>API Integration</h5>
                                <button class="btn btn--outline" onclick="app.setupAPIIntegration()">Connect Trial Database</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Smart Query Interface -->
                <div class="card">
                    <h3>ü§ñ AI-Powered Trial Analytics Query</h3>
                    <div class="smart-query-interface">
                        <div class="query-input">
                            <textarea id="smart-query" placeholder="Ask intelligent questions about your trials and competitive landscape, e.g.:&#10;‚Ä¢ 'Compare our cardiovascular trial enrollment rates to industry benchmarks'&#10;‚Ä¢ 'What are the competitive threats for our Phase II oncology studies?'&#10;‚Ä¢ 'Predict enrollment completion for trials in the Northeast region'&#10;‚Ä¢ 'Analyze budget variance across therapeutic areas'"></textarea>
                            <div class="query-actions">
                                <button class="btn btn--primary" onclick="app.executeSmartQuery()">Analyze with AI</button>
                                <button class="btn btn--outline" onclick="app.clearQuery()">Clear</button>
                            </div>
                        </div>
                        <div class="suggested-queries">
                            <h5>Suggested Queries:</h5>
                            <div class="query-tags">
                                <span class="query-tag" onclick="app.setQuery('enrollment-performance')">Enrollment Performance Analysis</span>
                                <span class="query-tag" onclick="app.setQuery('competitive-benchmark')">Competitive Benchmarking</span>
                                <span class="query-tag" onclick="app.setQuery('budget-variance')">Budget Variance Analysis</span>
                                <span class="query-tag" onclick="app.setQuery('risk-assessment')">Risk Assessment</span>
                                <span class="query-tag" onclick="app.setQuery('market-trends')">Market Trend Analysis</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Real-time Analytics Results -->
                <div class="results-grid hidden" id="cro-results">
                    <!-- Query Results -->
                    <div class="card">
                        <h3>üìà AI Analysis Results</h3>
                        <div id="query-results" class="query-results-container">
                            <!-- Results will be populated here -->
                        </div>
                    </div>

                    <!-- Live Competitive Intelligence -->
                    <div class="card">
                        <h3>üîç Live Competitive Intelligence</h3>
                        <div id="competitive-intel" class="competitive-intel-container">
                            <!-- Competitive analysis will be populated here -->
                        </div>
                    </div>

                    <!-- Trial Performance Dashboard -->
                    <div class="card">
                        <h3>üìä Trial Performance Dashboard</h3>
                        <div id="trial-dashboard">
                            <canvas id="performance-chart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script src="app.js"></script>
</body>
</html>
