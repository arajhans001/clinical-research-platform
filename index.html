<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clinical Research Intelligence Platform</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.0/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation Header -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h2>Clinical Research Intel</h2>
                <span class="version-badge">AI-Powered</span>
            </div>
            <div class="nav-menu">
                <div class="ai-status" id="ai-status">
                    <div class="ai-indicator active"></div>
                    <span>AI Agent Active</span>
                </div>
                <button class="btn btn--outline nav-toggle" id="stakeholder-selector">
                    <span id="current-stakeholder">Select Your Role</span>
                    <svg class="chevron-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <!-- Stakeholder Selection Modal -->
    <div class="modal hidden" id="stakeholder-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Select Your Professional Role</h3>
                <button class="modal-close" id="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="stakeholder-grid">
                    <div class="stakeholder-card" data-stakeholder="physician">
                        <div class="stakeholder-icon">üë©‚Äç‚öïÔ∏è</div>
                        <h4>Physicians & Clinical Practitioners</h4>
                        <p>AI-powered EMR integration, intelligent patient-trial matching, and automated referral generation</p>
                        <div class="feature-highlights">
                            <span class="feature-tag">EMR Integration</span>
                            <span class="feature-tag">AI Matching</span>
                            <span class="feature-tag">Auto Referrals</span>
                        </div>
                        <button class="btn btn--primary">Enter Physician Portal</button>
                    </div>
                    <div class="stakeholder-card" data-stakeholder="pharma">
                        <div class="stakeholder-icon">üè¢</div>
                        <h4>Pharmaceutical Companies</h4>
                        <p>Complete drug development pipeline, AI regulatory assistant, and intelligent competitive analysis</p>
                        <div class="feature-highlights">
                            <span class="feature-tag">Development AI</span>
                            <span class="feature-tag">Regulatory Forms</span>
                            <span class="feature-tag">Competitive Intel</span>
                        </div>
                        <button class="btn btn--primary">Enter Pharma Portal</button>
                    </div>
                    <div class="stakeholder-card" data-stakeholder="cro">
                        <div class="stakeholder-icon">üìä</div>
                        <h4>Clinical Research Organizations</h4>
                        <p>Enterprise trial analytics, AI-powered competitive intelligence, and intelligent query processing</p>
                        <div class="feature-highlights">
                            <span class="feature-tag">Trial Analytics</span>
                            <span class="feature-tag">AI Queries</span>
                            <span class="feature-tag">Competitive Analysis</span>
                        </div>
                        <button class="btn btn--primary">Enter CRO Portal</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Welcome Section -->
        <section class="welcome-section" id="welcome-section">
            <div class="welcome-container">
                <h1>AI-Powered Clinical Research Intelligence</h1>
                <p class="welcome-subtitle">Enterprise-grade platform with intelligent agents for real-time analysis and decision support</p>
                <div class="welcome-features">
                    <div class="feature-item">
                        <div class="feature-icon">ü§ñ</div>
                        <h4>AI Agents</h4>
                        <p>Intelligent automation for every workflow</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">üìä</div>
                        <h4>Real-Time Data</h4>
                        <p>Live integration with clinical databases</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">üîí</div>
                        <h4>Enterprise Security</h4>
                        <p>HIPAA compliant data handling</p>
                    </div>
                </div>
                <button class="btn btn--primary btn--large" id="get-started-btn">Start Your Analysis</button>
            </div>
        </section>

        <!-- Physician Dashboard -->
        <section class="dashboard-section hidden" id="physician-dashboard">
            <div class="dashboard-container">
                <div class="dashboard-header">
                    <h2>ü©∫ Physician Intelligence Portal</h2>
                    <p>AI-powered patient-trial matching with EMR integration and automated clinical workflows</p>
                </div>

                <!-- Step-by-Step Guide -->
                <div class="instruction-panel">
                    <h3>üí° How to Use This Platform</h3>
                    <div class="instruction-steps">
                        <div class="instruction-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Connect Your Data</h4>
                                <p>Link your EMR system or upload patient files to begin intelligent analysis</p>
                            </div>
                        </div>
                        <div class="instruction-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>AI Patient Analysis</h4>
                                <p>Our AI agent automatically analyzes patient data and matches to clinical trials</p>
                            </div>
                        </div>
                        <div class="instruction-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>Generate Referrals</h4>
                                <p>Receive automated referral letters and patient education materials</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Data Input Section -->
                <div class="card">
                    <h3>üìÅ Patient Data Integration</h3>
                    <div class="data-integration-options">
                        <!-- EMR Integration -->
                        <div class="integration-option">
                            <h4>üè• EMR System Integration</h4>
                            <div class="emr-options">
                                <button class="btn btn--outline emr-btn" onclick="app.connectEMR('epic')">
                                    <div class="emr-logo">E</div>
                                    Epic MyChart
                                </button>
                                <button class="btn btn--outline emr-btn" onclick="app.connectEMR('cerner')">
                                    <div class="emr-logo">C</div>
                                    Cerner PowerChart
                                </button>
                                <button class="btn btn--outline emr-btn" onclick="app.connectEMR('allscripts')">
                                    <div class="emr-logo">A</div>
                                    Allscripts
                                </button>
                            </div>
                        </div>

                        <!-- File Upload -->
                        <div class="integration-option">
                            <h4>üìÇ File Upload</h4>
                            <div class="file-upload-section">
                                <div class="upload-area" id="patient-file-upload">
                                    <div class="upload-icon">üìÑ</div>
                                    <h5>Drop patient files here or click to browse</h5>
                                    <p>Supports: CSV, Excel, JSON, HL7 FHIR</p>
                                    <input type="file" id="patient-files" multiple accept=".csv,.xlsx,.json,.txt" hidden>
                                    <button class="btn btn--primary" onclick="document.getElementById('patient-files').click()">Select Files</button>
                                </div>
                                
                                <div class="recommended-data">
                                    <h6>üìã Recommended Patient Data Points:</h6>
                                    <div class="data-points">
                                        <span class="data-point">Patient ID</span>
                                        <span class="data-point">Age/DOB</span>
                                        <span class="data-point">Gender</span>
                                        <span class="data-point">Primary Diagnoses</span>
                                        <span class="data-point">Secondary Conditions</span>
                                        <span class="data-point">Current Medications</span>
                                        <span class="data-point">Lab Values</span>
                                        <span class="data-point">Allergies</span>
                                        <span class="data-point">Location/Zip Code</span>
                                        <span class="data-point">Insurance Information</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Manual Entry -->
                        <div class="integration-option">
                            <h4>‚úèÔ∏è Manual Patient Entry</h4>
                            <button class="btn btn--outline" onclick="app.showManualEntry()">Add Patient Manually</button>
                        </div>
                    </div>
                </div>

                <!-- EMR Authentication Modal -->
                <div class="modal hidden" id="emr-auth-modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 id="emr-auth-title">Connect EMR System</h3>
                            <button class="modal-close" onclick="app.closeEMRModal()">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div id="emr-auth-form">
                                <div class="form-group">
                                    <label>EMR System URL</label>
                                    <input type="url" id="emr-url" placeholder="https://your-emr-system.com/api/fhir" required>
                                    <div class="input-help">Enter your FHIR-compliant EMR endpoint</div>
                                </div>
                                <div class="form-group">
                                    <label>Client ID</label>
                                    <input type="text" id="emr-client-id" placeholder="Your FHIR Client ID" required>
                                </div>
                                <div class="form-group">
                                    <label>Access Token</label>
                                    <input type="password" id="emr-token" placeholder="Your API Access Token" required>
                                </div>
                                <div class="form-actions">
                                    <button class="btn btn--primary" onclick="app.authenticateEMR()">Connect & Test</button>
                                    <button class="btn btn--outline" onclick="app.closeEMRModal()">Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Manual Entry Modal -->
                <div class="modal hidden" id="manual-entry-modal">
                    <div class="modal-content modal-large">
                        <div class="modal-header">
                            <h3>Add Patient Information</h3>
                            <button class="modal-close" onclick="app.closeManualEntry()">&times;</button>
                        </div>
                        <div class="modal-body">
                            <form id="manual-patient-form">
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label>Patient Name *</label>
                                        <input type="text" id="patient-name" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Age *</label>
                                        <input type="number" id="patient-age" min="0" max="120" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Gender *</label>
                                        <select id="patient-gender" required>
                                            <option value="">Select gender</option>
                                            <option value="male">Male</option>
                                            <option value="female">Female</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Primary Diagnosis *</label>
                                        <input type="text" id="primary-diagnosis" placeholder="e.g., Type 2 Diabetes" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Secondary Conditions</label>
                                        <textarea id="secondary-conditions" placeholder="List additional conditions, separated by commas"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label>Current Medications</label>
                                        <textarea id="current-medications" placeholder="List current medications"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label>Location (Zip Code) *</label>
                                        <input type="text" id="patient-zip" placeholder="12345" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Insurance Provider</label>
                                        <input type="text" id="insurance-provider" placeholder="e.g., Blue Cross Blue Shield">
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn btn--primary">Add Patient</button>
                                    <button type="button" class="btn btn--outline" onclick="app.closeManualEntry()">Cancel</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Patient List and Analysis -->
                <div class="card" id="patient-analysis-section" style="display: none;">
                    <h3>üë• Patient Analysis & Trial Matching</h3>
                    <div class="analysis-controls">
                        <button class="btn btn--primary" onclick="app.loadAllPatients()">
                            <span class="btn-icon">üîÑ</span>
                            Load All Patients
                        </button>
                        <button class="btn btn--outline" onclick="app.runBatchAnalysis()">
                            <span class="btn-icon">ü§ñ</span>
                            AI Batch Analysis
                        </button>
                        <div class="patient-search">
                            <input type="text" id="patient-search" placeholder="Search patients...">
                            <button class="btn btn--secondary" onclick="app.searchPatients()">Search</button>
                        </div>
                    </div>
                    
                    <div id="patient-list" class="patient-list">
                        <!-- Patients will be displayed here -->
                    </div>
                </div>

                <!-- Trial Analysis Results -->
                <div class="card hidden" id="trial-analysis-section">
                    <h3>üéØ AI Trial Analysis Results</h3>
                    <div id="selected-patient-summary"></div>
                    <div id="ai-analysis-results"></div>
                </div>
            </div>
        </section>

        <!-- Pharma Dashboard -->
        <section class="dashboard-section hidden" id="pharma-dashboard">
            <div class="dashboard-container">
                <div class="dashboard-header">
                    <h2>üè¢ Pharmaceutical Intelligence Portal</h2>
                    <p>Complete AI-powered drug development pipeline with regulatory automation and competitive intelligence</p>
                </div>

                <!-- User Guide -->
                <div class="instruction-panel">
                    <h3>üí° Complete Drug Development Assistant</h3>
                    <div class="instruction-steps">
                        <div class="instruction-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Describe Your Drug</h4>
                                <p>Enter your development plan in natural language - our AI will create a comprehensive strategy</p>
                            </div>
                        </div>
                        <div class="instruction-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>AI Regulatory Assistant</h4>
                                <p>Get automated form generation, timeline planning, and regulatory guidance</p>
                            </div>
                        </div>
                        <div class="instruction-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>Competitive Intelligence</h4>
                                <p>Receive AI-powered competitive analysis and strategic recommendations</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Drug Development Planning -->
                <div class="card">
                    <h3>üíä AI Drug Development Planner</h3>
                    <div class="development-planner">
                        <div class="planner-instruction">
                            <h4>üìù Describe Your Drug Development Plan</h4>
                            <p>Tell our AI agent about your drug, therapeutic area, target indication, current stage, timeline goals, budget constraints, and any specific challenges or opportunities. Be as detailed as possible.</p>
                        </div>
                        
                        <div class="development-input">
                            <textarea id="drug-development-plan" rows="8" placeholder="Example: We are developing a novel PD-1 inhibitor for non-small cell lung cancer. Currently in preclinical stage with promising in-vitro results. Looking to enter Phase I by Q2 2026 with a $150M budget. Main challenge is differentiating from existing PD-1 inhibitors like Keytruda. We have exclusive licensing for combination with our proprietary biomarker platform. Target FDA breakthrough designation. Primary market is US with eventual EU expansion...

Describe your drug development project in detail here..."></textarea>
                            
                            <div class="input-actions">
                                <button class="btn btn--primary btn--large" onclick="app.generateDevelopmentPlan()">
                                    <span class="btn-icon">ü§ñ</span>
                                    Generate AI Development Plan
                                </button>
                                <button class="btn btn--outline" onclick="app.clearDevelopmentPlan()">Clear</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI-Generated Development Plan Results -->
                <div class="results-section hidden" id="pharma-results">
                    <!-- Development Strategy -->
                    <div class="card">
                        <h3>üìã AI-Generated Development Strategy</h3>
                        <div id="development-strategy" class="ai-content-section">
                            <div class="loading-ai">ü§ñ AI Agent analyzing your development plan...</div>
                        </div>
                    </div>

                    <!-- Regulatory Framework Assistant -->
                    <div class="card">
                        <h3>üìÑ Complete Regulatory Framework Assistant</h3>
                        <div id="regulatory-framework" class="regulatory-section">
                            <div class="framework-header">
                                <h4>üéØ Regulatory Timeline & Forms</h4>
                                <div class="timeline-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="regulatory-progress"></div>
                                    </div>
                                    <span id="progress-text">0% Complete</span>
                                </div>
                            </div>
                            
                            <div id="regulatory-timeline" class="timeline-container">
                                <!-- Timeline will be populated by AI -->
                            </div>
                            
                            <div class="form-generation-section">
                                <h5>üìù Automated Form Generation</h5>
                                <div id="form-list" class="form-list">
                                    <!-- Forms will be populated here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Competitive Analysis -->
                    <div class="card">
                        <h3>üè¢ AI Competitive Intelligence</h3>
                        <div id="competitive-analysis" class="competitive-section">
                            <div class="loading-ai">ü§ñ AI Agent performing competitive analysis...</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CRO Dashboard -->
        <section class="dashboard-section hidden" id="cro-dashboard">
            <div class="dashboard-container">
                <div class="dashboard-header">
                    <h2>üìä CRO Intelligence Portal</h2>
                    <p>Enterprise trial analytics with AI-powered competitive intelligence and intelligent query processing</p>
                </div>

                <!-- User Guide -->
                <div class="instruction-panel">
                    <h3>üí° How to Maximize Your CRO Analysis</h3>
                    <div class="instruction-steps">
                        <div class="instruction-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Upload Trial Data</h4>
                                <p>Import your trial data via CSV, Excel, or manual entry for comprehensive analysis</p>
                            </div>
                        </div>
                        <div class="instruction-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>Describe Your Goals</h4>
                                <p>Tell our AI about your trials, challenges, and objectives for personalized insights</p>
                            </div>
                        </div>
                        <div class="instruction-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>AI-Powered Analysis</h4>
                                <p>Get enterprise-grade analytics, competitive intelligence, and strategic recommendations</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Input Section -->
                <div class="card">
                    <h3>üìÇ Trial Data & Business Information</h3>
                    <div class="cro-data-input">
                        <!-- Data Upload -->
                        <div class="data-upload-section">
                            <h4>üìä Upload Your Trial Data</h4>
                            <div class="upload-options">
                                <div class="upload-area" id="cro-file-upload">
                                    <div class="upload-icon">üìà</div>
                                    <h5>Drop trial data files here</h5>
                                    <p>CSV, Excel, JSON formats supported</p>
                                    <input type="file" id="cro-data-files" multiple accept=".csv,.xlsx,.json" hidden>
                                    <button class="btn btn--primary" onclick="document.getElementById('cro-data-files').click()">Upload Trial Data</button>
                                </div>
                            </div>
                        </div>

                        <!-- Business Context -->
                        <div class="business-context-section">
                            <h4>üéØ Describe Your CRO Business & Goals</h4>
                            <textarea id="cro-business-description" rows="6" placeholder="Example: We are a mid-size CRO specializing in oncology trials with 25 active studies across 150 sites. Main challenges include slow enrollment in our Phase III lung cancer trial and increasing competition from larger CROs. We need to improve site performance metrics and identify new market opportunities. Budget constraints require us to optimize resource allocation...

Describe your CRO business, current trials, challenges, goals, and specific questions you'd like analyzed..."></textarea>
                            
                            <button class="btn btn--primary btn--large" onclick="app.initializeCROAnalysis()">
                                <span class="btn-icon">ü§ñ</span>
                                Start AI CRO Analysis
                            </button>
                        </div>
                    </div>
                </div>

                <!-- AI Query Interface -->
                <div class="card" id="cro-query-section" style="display: none;">
                    <h3>ü§ñ Intelligent Business Query System</h3>
                    <div class="query-interface">
                        <div class="query-description">
                            <h4>üí¨ Ask Complex Business Questions</h4>
                            <p>Our AI agent can analyze your data, compare with competitors, and provide strategic insights. Ask questions about performance, market opportunities, competitive positioning, or strategic planning.</p>
                        </div>
                        
                        <div class="query-input-section">
                            <textarea id="intelligent-query" rows="4" placeholder="Examples:
‚Ä¢ How does our cardiovascular trial enrollment compare to industry benchmarks?
‚Ä¢ What competitive threats should we be aware of in our therapeutic areas?
‚Ä¢ Which of our sites are underperforming and what can we do to improve them?
‚Ä¢ What market opportunities exist for expansion based on our capabilities?
‚Ä¢ How should we optimize our resource allocation across current trials?

Ask your business question here..."></textarea>
                            
                            <div class="query-actions">
                                <button class="btn btn--primary btn--large" onclick="app.processIntelligentQuery()">
                                    <span class="btn-icon">üß†</span>
                                    Analyze with AI
                                </button>
                                <button class="btn btn--outline" onclick="app.clearQuery()">Clear Query</button>
                            </div>
                        </div>

                        <div class="suggested-queries">
                            <h5>üí° Suggested Analysis Areas:</h5>
                            <div class="query-suggestions">
                                <button class="query-suggestion" onclick="app.setSuggestedQuery('performance')">
                                    üìä Performance Analysis
                                </button>
                                <button class="query-suggestion" onclick="app.setSuggestedQuery('competitive')">
                                    üè¢ Competitive Intelligence
                                </button>
                                <button class="query-suggestion" onclick="app.setSuggestedQuery('enrollment')">
                                    üë• Enrollment Optimization
                                </button>
                                <button class="query-suggestion" onclick="app.setSuggestedQuery('financial')">
                                    üí∞ Financial Analysis
                                </button>
                                <button class="query-suggestion" onclick="app.setSuggestedQuery('strategic')">
                                    üéØ Strategic Planning
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Analysis Results -->
                <div class="results-section hidden" id="cro-results">
                    <!-- Business Analysis -->
                    <div class="card">
                        <h3>üìà Enterprise CRO Analysis</h3>
                        <div id="cro-business-analysis" class="ai-content-section">
                            <!-- Analysis results will be populated here -->
                        </div>
                    </div>

                    <!-- Competitive Intelligence -->
                    <div class="card">
                        <h3>üîç AI Competitive Intelligence</h3>
                        <div id="cro-competitive-intel" class="competitive-intel-section">
                            <!-- Competitive analysis will be populated here -->
                        </div>
                    </div>

                    <!-- Query Results -->
                    <div class="card">
                        <h3>üí¨ Intelligent Query Results</h3>
                        <div id="query-analysis-results" class="query-results-section">
                            <!-- Query results will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script src="app.js"></script>
</body>
</html>
